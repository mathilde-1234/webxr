<!doctype html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <title>Ma scène XR</title>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
  </head>
  <body>
    <a-scene vr-mode-ui="enabled: true">
      <a-camera position="0 1.6 0"></a-camera>
      <a-sky
        src="https://cdn.aframe.io/360-image-gallery-boilerplate/img/sechelt.jpg"
        rotation="0 100 0"
      ></a-sky>

      <a-entity id="leftHand" hand-controls="hand: left; handModelStyle: lowPoly; color: #ffcccc"></a-entity>
      <a-entity id="rightHand" hand-controls="hand: right; handModelStyle: lowPoly; color: #ffcccc"></a-entity>


      <a-box id="followCube" color="#FF0000" depth="0.3" height="0.3" width="0.3"></a-box>
    </a-scene>

    <script>
      AFRAME.registerComponent("follow-hand", {
        tick: function () {
          const hand = document.querySelector("#rightHand");
          const cube = document.querySelector("#followCube");
          if (hand && cube && hand.object3D.visible) {
            // on récupère la position de la main et on la copie au cube
            const handPos = hand.object3D.position;
            cube.object3D.position.copy(handPos);
            // Optionnel : décaler un peu le cube pour le voir clairement
            cube.object3D.position.y += 0.2;
          }
        }
      });

      document.querySelector("a-scene").addEventListener("loaded", function () {
        document.querySelector("#followCube").setAttribute("follow-hand", "");
      });
    </script>
  </body>
</html>
